{"ast":null,"code":"import { csrfFetch } from \"./csrf.js\";\nconst GET_INGREDIENTS = '/ingredients';\nconst GET_MY_INGREDIENTS = '/myIngredients';\nconst NEW_INGREDIENT = '/newIngredient';\nconst EDIT_INGREDIENT = '/editIngredient';\nconst DELETE_INGREDIENT = '/deleteIngredient';\n\nconst getIng = list => ({\n  type: GET_INGREDIENTS,\n  list\n});\n\nconst getMyIng = list => ({\n  type: GET_MY_INGREDIENTS,\n  list\n});\n\nconst newIng = payload => ({\n  type: NEW_INGREDIENT,\n  payload\n});\n\nconst editIng = () => ({\n  type: NEW_INGREDIENT\n});\n\nconst deleteIng = () => ({\n  type: NEW_INGREDIENT\n});\n\nexport const getIngredients = () => async dispatch => {\n  const response = await csrfFetch('/api/ingredients');\n\n  if (response.ok) {\n    const ingredients = await response.json();\n    dispatch(getIng(ingredients));\n  }\n};\nexport const getMyIngredients = userId => async dispatch => {\n  const response = await csrfFetch(`/api/ingredients/user/${userId}`);\n\n  if (response.ok) {\n    const ingredients = await response.json();\n    dispatch(getMyIng(ingredients));\n  }\n};\nexport const newIngredient = (name, imgUrl, desc, userId) => async dispatch => {\n  const response = await csrfFetch(\"/api/ingredients\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      name,\n      imgUrl,\n      desc,\n      userId\n    })\n  });\n\n  if (response.ok) {\n    const newIngredient = await response.json();\n    dispatch(newIng(newIngredient));\n    dispatch(getIngredients());\n    dispatch(getMyIngredients(userId));\n  }\n};\nexport const editIngredient = (name, imgUrl, desc, userId) => async dispatch => {\n  const response = await csrfFetch(`/api/ingre/`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      fridgeId,\n      name\n    })\n  });\n  const data = await response.json();\n  console.log(data);\n  dispatch(editRef());\n  const response2 = await csrfFetch(`/api/fridges/user/${data.userId}`);\n\n  if (response2.ok) {\n    const fridges = await response2.json();\n    dispatch(getKitchen(fridges));\n    return fridges;\n  }\n};\nconst initialState = {\n  ingredients: null,\n  myIngredients: null\n};\n\nfunction reducer(state = initialState, action) {\n  let newState;\n\n  switch (action.type) {\n    case GET_INGREDIENTS:\n      // const allIngs = {};\n      // action.list.forEach(ingredient => {\n      //     allIngs[ingredient.id] = ingredient\n      // })\n      newState = { ...state,\n        ingredients: action.list\n      };\n      return newState;\n\n    case NEW_INGREDIENT:\n      return state;\n\n    case GET_MY_INGREDIENTS:\n      newState = { ...state,\n        myIngredients: action.list\n      };\n      return newState;\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","map":{"version":3,"sources":["/home/cheshirekate8/appAcademyCode/projects/stardewRecipes/solution/frontend/src/store/pantry.js"],"names":["csrfFetch","GET_INGREDIENTS","GET_MY_INGREDIENTS","NEW_INGREDIENT","EDIT_INGREDIENT","DELETE_INGREDIENT","getIng","list","type","getMyIng","newIng","payload","editIng","deleteIng","getIngredients","dispatch","response","ok","ingredients","json","getMyIngredients","userId","newIngredient","name","imgUrl","desc","method","body","JSON","stringify","editIngredient","headers","fridgeId","data","console","log","editRef","response2","fridges","getKitchen","initialState","myIngredients","reducer","state","action","newState"],"mappings":"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","sourcesContent":["import { csrfFetch } from \"./csrf.js\";\n\nconst GET_INGREDIENTS = '/ingredients'\nconst GET_MY_INGREDIENTS = '/myIngredients'\nconst NEW_INGREDIENT = '/newIngredient'\nconst EDIT_INGREDIENT = '/editIngredient'\nconst DELETE_INGREDIENT = '/deleteIngredient'\n\nconst getIng = (list) => ({\n    type: GET_INGREDIENTS,\n    list\n})\n\nconst getMyIng = (list) => ({\n    type: GET_MY_INGREDIENTS,\n    list\n})\n\nconst newIng = (payload) => ({\n    type: NEW_INGREDIENT,\n    payload\n})\n\nconst editIng = () => ({\n    type: NEW_INGREDIENT,\n})\n\nconst deleteIng = () => ({\n    type: NEW_INGREDIENT,\n})\n\n\nexport const getIngredients = () => async dispatch => {\n    const response = await csrfFetch('/api/ingredients')\n    if (response.ok) {\n        const ingredients = await response.json();\n        dispatch(getIng(ingredients));\n    }\n}\n\nexport const getMyIngredients = (userId) => async dispatch => {\n    const response = await csrfFetch(`/api/ingredients/user/${userId}`)\n    if (response.ok) {\n        const ingredients = await response.json();\n        dispatch(getMyIng(ingredients));\n    }\n}\n\nexport const newIngredient = (name, imgUrl, desc, userId) => async dispatch => {\n    const response = await csrfFetch(\"/api/ingredients\", {\n        method: \"POST\",\n        body: JSON.stringify({ name, imgUrl, desc, userId }),\n    });\n    if (response.ok) {\n        const newIngredient = await response.json();\n        dispatch(newIng(newIngredient))\n        dispatch(getIngredients());\n        dispatch(getMyIngredients(userId));\n    }\n}\n\nexport const editIngredient = (name, imgUrl, desc, userId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/ingre/`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({fridgeId, name}),\n    })\n    const data = await response.json();\n    console.log(data)\n    dispatch(editRef());\n    const response2 = await csrfFetch(`/api/fridges/user/${data.userId}`)\n    if (response2.ok) {\n        const fridges = await response2.json();\n        dispatch(getKitchen(fridges));\n        return fridges;\n    }\n}\n\n\nconst initialState = { ingredients: null, myIngredients: null };\n\nfunction reducer(state = initialState, action) {\n    let newState;\n    switch (action.type) {\n        case GET_INGREDIENTS:\n            // const allIngs = {};\n            // action.list.forEach(ingredient => {\n            //     allIngs[ingredient.id] = ingredient\n            // })\n            newState = {\n                ...state,\n                ingredients: action.list\n            }\n            return newState;\n        case NEW_INGREDIENT:\n            return state;\n        case GET_MY_INGREDIENTS:\n            newState = {\n                ...state,\n                myIngredients: action.list\n            }\n            return newState;\n        default:\n            return state;\n    }\n}\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}