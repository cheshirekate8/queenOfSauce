{"ast":null,"code":"import { csrfFetch } from \"./csrf.js\";\nconst GET_INGREDIENTS = '/ingredients';\nconst GET_MY_INGREDIENTS = '/myIngredients';\nconst NEW_INGREDIENT = '/newIngredient';\nconst DELETE_INGREDIENT = '/deleteIngredient';\nconst EDIT_INGREDIENT = '/editIngredient';\n\nconst getIng = list => ({\n  type: GET_INGREDIENTS,\n  list\n});\n\nconst getMyIng = list => ({\n  type: GET_MY_INGREDIENTS,\n  list\n});\n\nconst newIng = payload => ({\n  type: NEW_INGREDIENT,\n  payload\n});\n\nconst editIng = () => ({\n  type: NEW_INGREDIENT\n});\n\nconst deleteIng = () => ({\n  type: NEW_INGREDIENT\n});\n\nexport const getIngredients = () => async dispatch => {\n  const response = await csrfFetch('/api/ingredients');\n\n  if (response.ok) {\n    const ingredients = await response.json();\n    dispatch(getIng(ingredients));\n  }\n};\nexport const getMyIngredients = userId => async dispatch => {\n  const response = await csrfFetch(`/api/ingredients/user/${userId}`);\n\n  if (response.ok) {\n    const ingredients = await response.json();\n    dispatch(getMyIng(ingredients));\n  }\n};\nexport const newIngredient = (name, imgUrl, desc, userId) => async dispatch => {\n  const response = await csrfFetch(\"/api/ingredients\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      name,\n      imgUrl,\n      desc,\n      userId\n    })\n  });\n\n  if (response.ok) {\n    const newIngredient = await response.json();\n    dispatch(newIng(newIngredient));\n    dispatch(getIngredients());\n    dispatch(getMyIngredients(userId));\n  }\n};\nexport const editIngredient = (ingredientId, name, imgUrl, desc, userId) => async dispatch => {\n  const response = await csrfFetch(`/api/ingredients/${ingredientId}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name,\n      imgUrl,\n      desc,\n      userId\n    })\n  });\n  const data = await response.json();\n  dispatch(editIng());\n  dispatch(getIngredients());\n  dispatch(getMyIngredients(userId));\n};\nexport const deleteIngredient = ingredientId => async dispatch => {\n  const response = await csrfFetch(`/api/ingredients/${ingredientId}`, {\n    method: 'DELETE'\n  });\n  const data = await response.json();\n  dispatch(deleteIng());\n  dispatch(getMyIngredients(data.userId));\n};\nconst initialState = {\n  ingredients: null,\n  myIngredients: null\n};\n\nfunction reducer(state = initialState, action) {\n  let newState;\n\n  switch (action.type) {\n    case GET_INGREDIENTS:\n      // const allIngs = {};\n      // action.list.forEach(ingredient => {\n      //     allIngs[ingredient.id] = ingredient\n      // })\n      newState = { ...state,\n        ingredients: action.list\n      };\n      return newState;\n\n    case NEW_INGREDIENT:\n      return state;\n\n    case GET_MY_INGREDIENTS:\n      newState = { ...state,\n        myIngredients: action.list\n      };\n      return newState;\n\n    case DELETE_INGREDIENT:\n      return state;\n\n    case EDIT_INGREDIENT:\n      return state;\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","map":{"version":3,"sources":["/home/cheshirekate8/appAcademyCode/projects/stardewRecipes/solution/frontend/src/store/pantry.js"],"names":["csrfFetch","GET_INGREDIENTS","GET_MY_INGREDIENTS","NEW_INGREDIENT","DELETE_INGREDIENT","EDIT_INGREDIENT","getIng","list","type","getMyIng","newIng","payload","editIng","deleteIng","getIngredients","dispatch","response","ok","ingredients","json","getMyIngredients","userId","newIngredient","name","imgUrl","desc","method","body","JSON","stringify","editIngredient","ingredientId","headers","data","deleteIngredient","initialState","myIngredients","reducer","state","action","newState"],"mappings":"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","sourcesContent":["import { csrfFetch } from \"./csrf.js\";\n\nconst GET_INGREDIENTS = '/ingredients'\nconst GET_MY_INGREDIENTS = '/myIngredients'\nconst NEW_INGREDIENT = '/newIngredient'\nconst DELETE_INGREDIENT = '/deleteIngredient'\nconst EDIT_INGREDIENT = '/editIngredient'\n\nconst getIng = (list) => ({\n    type: GET_INGREDIENTS,\n    list\n})\n\nconst getMyIng = (list) => ({\n    type: GET_MY_INGREDIENTS,\n    list\n})\n\nconst newIng = (payload) => ({\n    type: NEW_INGREDIENT,\n    payload\n})\n\nconst editIng = () => ({\n    type: NEW_INGREDIENT,\n})\n\nconst deleteIng = () => ({\n    type: NEW_INGREDIENT,\n})\n\n\nexport const getIngredients = () => async dispatch => {\n    const response = await csrfFetch('/api/ingredients')\n    if (response.ok) {\n        const ingredients = await response.json();\n        dispatch(getIng(ingredients));\n    }\n}\n\nexport const getMyIngredients = (userId) => async dispatch => {\n    const response = await csrfFetch(`/api/ingredients/user/${userId}`)\n    if (response.ok) {\n        const ingredients = await response.json();\n        dispatch(getMyIng(ingredients));\n    }\n}\n\nexport const newIngredient = (name, imgUrl, desc, userId) => async dispatch => {\n    const response = await csrfFetch(\"/api/ingredients\", {\n        method: \"POST\",\n        body: JSON.stringify({ name, imgUrl, desc, userId }),\n    });\n    if (response.ok) {\n        const newIngredient = await response.json();\n        dispatch(newIng(newIngredient))\n        dispatch(getIngredients());\n        dispatch(getMyIngredients(userId));\n    }\n}\n\nexport const editIngredient = (ingredientId, name, imgUrl, desc, userId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/ingredients/${ingredientId}`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({name, imgUrl, desc, userId}),\n    })\n    const data = await response.json();\n    dispatch(editIng());\n    dispatch(getIngredients());\n    dispatch(getMyIngredients(userId));\n}\n\nexport const deleteIngredient = (ingredientId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/ingredients/${ingredientId}`, {\n        method: 'DELETE'\n    })\n    const data = await response.json();\n    dispatch(deleteIng());\n    dispatch(getMyIngredients(data.userId));\n}\n\n\nconst initialState = { ingredients: null, myIngredients: null };\n\nfunction reducer(state = initialState, action) {\n    let newState;\n    switch (action.type) {\n        case GET_INGREDIENTS:\n            // const allIngs = {};\n            // action.list.forEach(ingredient => {\n            //     allIngs[ingredient.id] = ingredient\n            // })\n            newState = {\n                ...state,\n                ingredients: action.list\n            }\n            return newState;\n        case NEW_INGREDIENT:\n            return state;\n        case GET_MY_INGREDIENTS:\n            newState = {\n                ...state,\n                myIngredients: action.list\n            }\n            return newState;\n\n        case DELETE_INGREDIENT:\n            return state;\n        case EDIT_INGREDIENT:\n            return state\n        default:\n            return state;\n    }\n}\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}